<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.1/bootstrap-table.min.css">
    <script src ="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <title>The Movie DB</title>

    <style>
        html, body {
            height: 100%;
        }
        body {
            font: 400 17px/1.5 Lato, symbol;
            color: #777;
        }
        h3, h4 {
            margin: 10px 0 30px 0;
            letter-spacing: 8px;
            font-size: 20px;
            color: #111;
        }
        h5 {
            font-size: 20px;
        }
        .logo {
            border: 15px solid transparent;
            width: 65px;
            height: 60px;
            opacity: 1;
        }
        .bg-1 {
            background: #800000;
            color: #800000;
        }
        .bg-1 h3 {color: #FFFFFF;}
        .bg-1 p {font-style: italic;}

        .container {
            padding: 120px 0;
        }
        #searchMovie {
            padding: 30px 0 170px 0;
        }
        .content-container {
            min-height: 100%;
            margin-bottom: -170px;
        }

        footer {
            width: 100%;
            height: 170px;
            bottom: 0;
            background-color: #2d2d30;
            color: #f5f5f5;
            padding: 32px;
        }
        .row {
            margin: 80px 0;
        }
    </style>
</head>
<body>

<div class="container bg-1 text-center">
        <img src="https://onecluecrossword.net/wp-content/uploads/One-Clue-Crossword-Movie-Reel.jpg" class="img-circle" alt="Reel">
    <h3>Discover Films</h3>
    <form id="searchMovie">
        <div class="input-group">
    <input type="text" id="movieTitle" class="form-control" placeholder="Search for movie title, actor...">
    <div class="input-group-btn">
    <button class="btn btn-default" type="button">
        <i class="glyphicon glyphicon-search"></i>
    </button>
    </div>
        </div>
    <table class="table table-striped">
        <thread>
            <tr>
                <th> Poster </th>
                <th> Title </th>
                <th> Plot </th>
            </tr>
        </thread>
        <tbody id="container">
        <tr id="template">
            <td><a href = "#" class="link"></a></td>
            <td class="plot"></td>
            <td><img src="" class="poster"/></td>
        </tr>
        </tbody>

    </table>
    </form>
</div>

<script>
    (function () {

        $(init);

        function init() {
            $("#searchMovie").click(searchMovie);
            var movieTitle = $("#movieTitle");
            var tbody = $("#container");
            var template = $("#template").clone();

            function searchMovie() {
                var title = movieTitle.val();

                $.ajax({
                    url: "https://api.themoviedb.org/3/search/movie?api_key=a09fd1d63dbc80b5d6ce75f4ffc6d148&language=en-US&query="+title+"&page=1&include_adult=yes",
                    success: renderTemplate
                });
            }

            function renderTemplate(movies) {
                console.log(movies);

                tbody.empty();

                for (var m in movies) {
                    var title = m.title;
                    var overview = m.overview;
                    var poster = "https://image.tmdb.org/t/p/w154" + this["poster_path"];
                    var release = m.release_date;
                    var vote = m.vote_average;
                    var popularity = m.popularity;

                    var tr = template.clone();

                    tr.find(".title")
                        .html(title);

                    tr.find(".overview")
                        .html(overview);

                    tr.find("https://image.tmdb.org/t/p/w154")
                        .attr("src", poster);

                    tbody.append(tr);
                }
            }

            function movieRendering(movies)
            {
                console.log(movies);

                tbody.empty();

                for (var m in movies) {
                    var title = m.title;
                    var overview = m.overview;
                    var poster = "https://image.tmdb.org/t/p/w154" + this["poster_path"];
                    var release = m.release_date;
                    var vote = m.vote_average;
                    var popularity = m.popularity;

                    var tr = $("<tr>");
                    var titleTd = $("<td>").append(title);
                    var overviewTd = $("<td>").append(overview);
                    var posterimg = $("<img>").attr("src", poster);
                    var posterTd = $("<td>").append(img);

                    tr.append(titleTd);
                    tr.append(overviewTd);
                    tr.append(posterTd);

                    tbody.append(tr);

                }
            }

        }
    })();
</script>
</body>
</html>
